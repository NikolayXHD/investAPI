# Особенности торговли в выходные дни и на внутреннем рынке

<<<<<<< Updated upstream
В Tinkoff Invest API можно совершать операции в выходные и нерабочие дни, когда торги на биржах не проводятся.
Заключать сделки можно только по [ограниченному списку инструментов](/investAPI/faq_instruments/#_20).
=======
В Тинькофф реализовано несколько дополнительных режимов торгов, которые расширяют биржевую торговлю.
Эта статья поможет использовать все мозможности Tinkoff Invest API.

* **Торговля по выходным** — торги **биржевыми** инструментами в выходные дни, когда биржа не работает.

* **Фонды Тинькофф** — торги фондами Тинькофф на внутреннем рынке.

* **Операции с инструментами, по которым приостановлена биржевая торговля** — торги инструментами
  иностранных компаний на внутреннем рынке.

##Торговля по выходным
В выходные и нерабочие дни, когда торги на биржах не проводятся, в Tinkoff Invest API есть возможность совершать операции.
Заключать сделки возможно только по [ограниченному списку инструментов](/investAPI/faq_instruments/#_20).
Торговля по выходным имеет ряд [особенностей](https://www.tinkoff.ru/finance/blog/weekend-trading/).
>>>>>>> Stashed changes

[Подробнее про особенности торговли в выходные](https://www.tinkoff.ru/finance/blog/weekend-trading/)

## Котировки и рыночные данные

Торговля ведётся на внутреннем рынке, поэтому [торговый статус](/investAPI/marketdata/#gettradingstatus) инструмента будет `DEALER_NORMAL_TRADING`.

Стакан можно получить через метод [GetOrderBook](/investAPI/marketdata/#getorderbook).

### Торговый статус инструмента

Следует различать торговый статус инструмента на бирже и на внутреннем рынке. Возможность торговать инструментом на бирже в API имеет больший приоритет, чем торговля внутри брокера. 

Например, если на бирже торговый статус инструмента — `NORMAL_TRADING`, а на внутреннем рынке — `DEALER_NORMAL_TRADING`, в ответе методов вернётся `SECURITY_TRADING_STATUS_NORMAL_TRADING`. При этом изменение внутреннего статуса не будет транслироваться в стримы.

Изменение биржевого статуса всегда передаётся в стрим. Если после изменения биржевого статуса торги на бирже недоступны, а внутренний рынок открыт для торговли, после биржевого статуса в стрим будет продублирован торговый статус внутреннего рынка. 

В таблице приведены некоторые ситуации и поведение API.

|     Ситуация в динамике               | Торговый статус инструмента | Сообщения в стриме                                   |
|:------------------------------------------|:----------------------------|:-----------------------------------------------------|
|Открытие торгов на внутреннем рынке        |   `DEALER_NORMAL_TRADING`     |             `DEALER_NORMAL_TRADING `                   |
|Остановка торгов на внутреннем рынке       |   `DEALER_BREAK_IN_TRADING`   |             `DEALER_BREAK_IN_TRADING`                 |
|Открытие торгов на бирже                   |          `NORMAL_TRADING`     |               `NORMAL_TRADING`                         |
|Открытие торгов на внутреннем рынке        |          `NORMAL_TRADING`     |                                                      |
|Остановка торгов на бирже                  |   `DEALER_NORMAL_TRADING`     |Сначала `BREAK_IN_TRADING`, потом —  `DEALER_NORMAL_TRADING`|
|Возобновление торгов на бирже              |          `NORMAL_TRADING`     |               `NORMAL_TRADING`                         |
|Остановка торгов на внутреннем рынке       |          `NORMAL_TRADING`     |                                                      |


### Свечи

Сейчас [свечи](/investAPI/marketdata/#getcandles) за выходные дни недоступны в API.

## Выставление заявок

В выходные дни заявки можно выставлять с некоторыми ограничениями. Доступные [типы заявок](/investAPI/orders/#ordertype) приведены в таблице.

|Тип заявки|Доступность выставления торгов|
|---|---|
Лимитная|Доступно. Исключение — [алгоритм исполнения](/investAPI/orders/#timeinforcetype) `FILL_OR_KILL`|
Рыночная|Недоступно|
Лучшая цена|Доступно|

[Отмена](/investAPI/orders/#cancelorder), [cтатус](/investAPI/orders/#getorderstate) и [изменение](/investAPI/orders/#replaceorder) выставленной заявки работают в обычном режиме.

### Получить сделки

Сделки, совершенные в выходные, доступны в [стриме](/investAPI/orders/#tradesstream).